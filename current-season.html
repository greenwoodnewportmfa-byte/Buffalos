<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Current Season | GNMFA</title>

  <!-- Shared theme -->
  <link rel="stylesheet" href="/Buffalos/assets/style.css" />

  <style>
    /* Page layout */
    .page-wrap{ padding:14px 0 18px; }
    .stack{ display:grid; gap:14px; }

    /* Season grid: mobile stacked, desktop 75/25 */
    .season-menu{
      display:grid;
      gap:14px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 720px){
      .season-menu{ grid-template-columns: 3fr 1fr; }
    }

    /* Center titles on this page */
    .section-title{ text-align:center; }

    /* Home Field */
    .home-field{ text-align:center; }
    .home-field .address{
      color: rgba(255,255,255,.85);
      line-height:1.5;
      margin: 0 0 10px;
    }
    .home-field .blurb{
      color: rgba(255,255,255,.72);
      font-size:13px;
      line-height:1.4;
      max-width:560px;
      margin:0 auto 12px;
    }
    .map-link{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:12px 14px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      font-weight:1000;
      letter-spacing:.6px;
      text-transform:uppercase;
      font-size:12px;
    }
    .map-link:hover{ background: rgba(255,255,255,.12); }

    /* Fall buttons stacked on mobile only */
    @media (max-width: 719px){
      .fall-pills{
        flex-direction:column;
        align-items:stretch;
      }
      .fall-pills .pill{
        width:100%;
      }
    }

    /* Calendar selector */
    .cal-controls{
      display:grid;
      gap:10px;
      margin: 10px 0 12px;
      padding:12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .cal-controls .hint{
      font-size:12px;
      color: rgba(255,255,255,.72);
      line-height:1.35;
      margin:0;
      text-align:center;
    }
    .check-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      justify-content:center;
    }
    .check-pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      user-select:none;
      cursor:pointer;
    }
    .check-pill input{
      width:18px;
      height:18px;
      accent-color:#0b1a33;
      cursor:pointer;
    }
    .check-pill span{
      font-weight:1000;
      text-transform:uppercase;
      letter-spacing:.6px;
      font-size:12px;
      color: rgba(255,255,255,.90);
    }
    .cal-actions{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:4px;
    }
    .small-btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      font-weight:1000;
      letter-spacing:.6px;
      text-transform:uppercase;
      font-size:12px;
      cursor:pointer;
    }
    .small-btn:hover{ background: rgba(255,255,255,.12); }

    .cal-wrap{
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.15);
    }
    .cal-wrap iframe{
      width:100%;
      height:70vh;
      min-height:560px;
      border:0;
      display:block;
    }
  </style>
</head>

<body>

  <!-- Shared Header (Current Season ACTIVE) -->
  <header class="topbar camo">
    <div class="container">
      <div class="topbar-inner">
        <a class="brand" href="/Buffalos/index.html" aria-label="GNMFA Home">
          <img src="/Buffalos/assets/img/logo.png" alt="GNMFA logo" />
          <div class="text">
            <div class="title">GNMFA</div>
            <div class="subtitle">Youth Football</div>
          </div>
        </a>

        <nav class="nav" aria-label="Primary navigation">
          <a href="/Buffalos/index.html">Home</a>
          <a class="active" href="/Buffalos/current-season.html">Current Season</a>
          <a href="/Buffalos/registration.html">Registration</a>
          <a href="/Buffalos/directions.html">Directions</a>
        </nav>

        <div class="actions">
          <a class="btn primary" href="/Buffalos/registration.html">Register</a>

          <button class="icon-btn mobile-toggle"
                  aria-label="Open menu"
                  aria-expanded="false"
                  data-mobile-toggle>
            <div class="burger-lines">
              <span></span><span></span><span></span>
            </div>
          </button>
        </div>
      </div>

      <!-- Mobile Menu -->
      <div class="mobile-menu" data-mobile-menu>
        <a href="/Buffalos/index.html">Home</a>
        <a class="active" href="/Buffalos/current-season.html">Current Season</a>
        <a href="/Buffalos/registration.html">Registration</a>
        <a href="/Buffalos/directions.html">Directions</a>
      </div>
    </div>
  </header>

  <!-- PAGE CONTENT -->
  <main class="page-wrap">
    <div class="container">
      <div class="stack">

        <!-- Fall / Spring -->
        <div class="season-menu">
          <section class="card">
            <h2 class="section-title">Fall</h2>
            <div class="pill-row fall-pills">
              <a class="pill" href="/Buffalos/teams/midget.html">Midget</a>
              <a class="pill" href="/Buffalos/teams/pony.html">Pony</a>
              <a class="pill" href="/Buffalos/teams/peewee.html">PeeWee</a>
              <a class="pill" href="/Buffalos/teams/smurf.html">Smurf</a>
            </div>
          </section>

          <section class="card">
            <h2 class="section-title">Spring</h2>
            <div class="pill-row">
              <a class="pill" href="/Buffalos/teams/flag-football.html">Flag Football</a>
            </div>
          </section>
        </div>

        <!-- Home Field -->
        <section class="card home-field">
          <h2 class="section-title">Home Field</h2>
          <p class="address">208 W Juniata Pkwy, Millerstown, PA 17062</p>
          <p class="blurb">
            If a game or event is hosted somewhere other than our normal home field,
            the calendar event will always include the correct address in the event details.
          </p>
          <a class="map-link"
             href="https://www.google.com/maps/search/?api=1&query=208%20W%20Juniata%20Pkwy%2C%20Millerstown%2C%20PA%2017062"
             target="_blank" rel="noopener">
            Open Home Field in Google Maps
          </a>
        </section>

        <!-- Calendar -->
        <section class="card">
          <h2 class="section-title">Calendars (Schedule View)</h2>

          <div class="cal-controls" aria-label="Calendar filters">
            <p class="hint">Select one or more calendars to display. Your selections are saved on this device.</p>

            <div class="check-row">
              <label class="check-pill"><input type="checkbox" class="cal-check" data-cal="main" /><span>Main</span></label>
              <label class="check-pill"><input type="checkbox" class="cal-check" data-cal="midget" /><span>Midget</span></label>
              <label class="check-pill"><input type="checkbox" class="cal-check" data-cal="pony" /><span>Pony</span></label>
              <label class="check-pill"><input type="checkbox" class="cal-check" data-cal="peewee" /><span>PeeWee</span></label>
              <label class="check-pill"><input type="checkbox" class="cal-check" data-cal="smurf" /><span>Smurf</span></label>
              <label class="check-pill"><input type="checkbox" class="cal-check" data-cal="flag" /><span>Flag</span></label>
            </div>

            <div class="cal-actions">
              <button class="small-btn" type="button" id="calSelectAll">Select All</button>
              <button class="small-btn" type="button" id="calClear">Clear</button>
              <button class="small-btn" type="button" id="calMainOnly">Main Only</button>
            </div>
          </div>

          <div class="cal-wrap">
            <iframe id="calendarFrame"
              src="https://calendar.google.com/calendar/embed?ctz=America%2FNew_York&mode=AGENDA&src=greenwoodnewportmfa%40gmail.com"
              scrolling="no"></iframe>
          </div>
        </section>

      </div>
    </div>

    <!-- Banner directly under page content -->
    <div class="site-banner">
      GREENWOOD NEWPORT MIDGET FOOTBALL ASSOCIATION
    </div>
  </main>

  <script src="/Buffalos/assets/site.js"></script>
  <script>
    const STORAGE_KEY = "gnmfa_selected_calendars_v1";

    const CALS = {
      main:   "greenwoodnewportmfa@gmail.com",
      midget: "edadf15131fa59c3034dd5cda720cff7022f4715a342e223f0eba69677c44793@group.calendar.google.com",
      peewee: "1ea58f6ae42c7d08cd7ad9e39b7d4b747ca1e212a77096caadfcb0569eedc458@group.calendar.google.com",
      pony:   "96f7a0490181387d4827555994a09291b7e38b2548ce8804cd095b62c04df745@group.calendar.google.com",
      smurf:  "78c04e59857b5b7735fdbd64e588dc7e0f56408d9d401a4e626422281fa33ad9@group.calendar.google.com",
      flag:   "b53aad8bb141e32a2eabe3d3b82a4afeeedf672a61f87e7c1f41b9ef527b9f27@group.calendar.google.com"
    };

    const frame = document.getElementById("calendarFrame");
    const checks = Array.from(document.querySelectorAll(".cal-check"));

    function buildCalendarUrl(selectedKeys){
      const url = new URL("https://calendar.google.com/calendar/embed");
      url.searchParams.set("ctz", "America/New_York");
      url.searchParams.set("mode", "AGENDA");
      const keys = selectedKeys.length ? selectedKeys : ["main"];
      keys.forEach(k => url.searchParams.append("src", CALS[k]));
      return url.toString();
    }

    function getSelectedKeys(){ return checks.filter(c => c.checked).map(c => c.dataset.cal); }
    function setSelectedKeys(keys){
      const set = new Set(keys);
      checks.forEach(c => c.checked = set.has(c.dataset.cal));
    }
    function saveSelection(keys){
      try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(keys)); }catch(e){}
    }
    function loadSelection(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return null;
        const parsed = JSON.parse(raw);
        if(!Array.isArray(parsed)) return null;
        return parsed.filter(k => Object.prototype.hasOwnProperty.call(CALS, k));
      }catch(e){ return null; }
    }

    function updateCalendar({persist=true} = {}){
      const keys = getSelectedKeys();
      frame.src = buildCalendarUrl(keys);
      if(persist) saveSelection(keys);
    }

    checks.forEach(c => c.addEventListener("change", () => updateCalendar({persist:true})));

    document.getElementById("calSelectAll").addEventListener("click", () => {
      checks.forEach(c => c.checked = true);
      updateCalendar({persist:true});
    });

    document.getElementById("calClear").addEventListener("click", () => {
      checks.forEach(c => c.checked = false);
      updateCalendar({persist:true});
    });

    document.getElementById("calMainOnly").addEventListener("click", () => {
      checks.forEach(c => c.checked = (c.dataset.cal === "main"));
      updateCalendar({persist:true});
    });

    const saved = loadSelection();
    if(saved && saved.length) setSelectedKeys(saved);
    else setSelectedKeys(["main"]);
    updateCalendar({persist:false});
  </script>
</body>
</html>
